<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>IgDiscover report for library “{{ config.library_name }}“</title>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  
  <style>
  .content {
    margin: 30px;
  }
  .mainpage {
    padding: 0 30px;
  }
  .igd-table tr th:nth-child(2),
  .igd-table tr td:nth-child(2),
  .igd-table tr th:last-child,
  .igd-table tr td:last-child {
    text-align: right;
  }
  .igd-table {
    max-width: 500px;
  }
  footer {
    padding: 20px;
    margin: 20px 0 0;
    border-top: 1px solid #ccc;
    background-color: #ededed;
    color: #999;
    font-size: 0.8em;
  }
  </style>

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>

<div class="container">
  <div class="row">
    <nav class="col-sm-3">
      <a href="#"><img src="http://placehold.it/600x250?text=Logo" class="img-thumbnail"></a>
      <hr>
      <ul class="nav nav-pills nav-stacked">
        <li><a href="#">Home</a></li>
        <li><a href="#plots">Plots</a></li>
        <li><a href="#stats">Stats</a></li>
      </ul>
    </nav>
    <div class="col-sm-9 mainpage">
      <h1>IgDiscover report for library “{{ config.library_name }}”</h1>
      <p class="lead">Here you can see a report.</p>
      <p>IgDiscover version {{ stats.version }}.</p>
      <h2>Library info</h2>
      <p>Number of reads: {{ '{:,d}'.format(stats.reads.total) }}</p>
      
      <h2 id="plots">Plots</h2>
      <p>The plots look really nice:</p>
      <img src="http://placehold.it/600x250" class="img-thumbnail">
      
      
      <h2 id="stats">Database sizes</h2>
      <p>Size of starting database: {{ stats.iterations[0].size }}</p>
      {% if stats.iterations|length > 1 %}
      <table class="table igd-table">
        <thead>
          <tr>
            <th>Iteration</th>
            <th>Size of database at end of iteration</th>
            <th>New genes (compared to previous iteration)</th>
          </tr>
        </thead>
        <tbody>
          {%- for it in stats.iterations[1:] -%}
          <tr>
            <td>{{ loop.index }}</td>
            <td>{{ it.size }}</td>
            <td>{{ it.gained }}</td>
          </tr>
          {%- endfor -%}
        </tbody>
      </table>

      <div id="database-sizes" style="width:600px;height:300px;"></div>
      <script>
        Plotly.plot('database-sizes', {{ plots.database_sizes.data|tojson }}, {{ plots.database_sizes.layout|tojson }});
      </script>
      {% endif %}
    </div>
  </div>

<footer class="row">
  <div class="col-sm-6">
    <p>Report created by <a href="https://igdiscover.readthedocs.io/">IgDiscover</a> {{ stats.version }}</p>
  </div>
  <div class="col-sm-6 text-right">
    <a href="http://www.scilifelab.se/"><img src="{{ images.scilifelab_logo }}" alt="SciLifeLab logo"></a>
  </div>
</footer>

  </div>

<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</body>
</html>